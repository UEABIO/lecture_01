<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Programming</title>
    <meta charset="utf-8" />
    <meta name="author" content="Philip Leftwich" />
    <meta name="date" content="2022-10-03" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/my-theme.css" type="text/css" />
    <link rel="stylesheet" href="css/my-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">





class: title-slide, left, top

# Programming

## &amp; Working with data

### Philip Leftwich

&lt;br&gt;



&lt;span style='color:white;'&gt;Slides released under&lt;/span&gt; [CC-BY 2.0](https://creativecommons.org/licenses/by/2.0/)&amp;nbsp;&amp;nbsp;<svg aria-hidden="true" role="img" viewBox="0 0 496 512" style="height:1em;width:0.97em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:white;overflow:visible;position:relative;"><path d="M245.83 214.87l-33.22 17.28c-9.43-19.58-25.24-19.93-27.46-19.93-22.13 0-33.22 14.61-33.22 43.84 0 23.57 9.21 43.84 33.22 43.84 14.47 0 24.65-7.09 30.57-21.26l30.55 15.5c-6.17 11.51-25.69 38.98-65.1 38.98-22.6 0-73.96-10.32-73.96-77.05 0-58.69 43-77.06 72.63-77.06 30.72-.01 52.7 11.95 65.99 35.86zm143.05 0l-32.78 17.28c-9.5-19.77-25.72-19.93-27.9-19.93-22.14 0-33.22 14.61-33.22 43.84 0 23.55 9.23 43.84 33.22 43.84 14.45 0 24.65-7.09 30.54-21.26l31 15.5c-2.1 3.75-21.39 38.98-65.09 38.98-22.69 0-73.96-9.87-73.96-77.05 0-58.67 42.97-77.06 72.63-77.06 30.71-.01 52.58 11.95 65.56 35.86zM247.56 8.05C104.74 8.05 0 123.11 0 256.05c0 138.49 113.6 248 247.56 248 129.93 0 248.44-100.87 248.44-248 0-137.87-106.62-248-248.44-248zm.87 450.81c-112.54 0-203.7-93.04-203.7-202.81 0-105.42 85.43-203.27 203.72-203.27 112.53 0 202.82 89.46 202.82 203.26-.01 121.69-99.68 202.82-202.84 202.82z"/></svg><svg aria-hidden="true" role="img" viewBox="0 0 496 512" style="height:1em;width:0.97em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:white;overflow:visible;position:relative;"><path d="M314.9 194.4v101.4h-28.3v120.5h-77.1V295.9h-28.3V194.4c0-4.4 1.6-8.2 4.6-11.3 3.1-3.1 6.9-4.7 11.3-4.7H299c4.1 0 7.8 1.6 11.1 4.7 3.1 3.2 4.8 6.9 4.8 11.3zm-101.5-63.7c0-23.3 11.5-35 34.5-35s34.5 11.7 34.5 35c0 23-11.5 34.5-34.5 34.5s-34.5-11.5-34.5-34.5zM247.6 8C389.4 8 496 118.1 496 256c0 147.1-118.5 248-248.4 248C113.6 504 0 394.5 0 256 0 123.1 104.7 8 247.6 8zm.8 44.7C130.2 52.7 44.7 150.6 44.7 256c0 109.8 91.2 202.8 203.7 202.8 103.2 0 202.8-81.1 202.8-202.8.1-113.8-90.2-203.3-202.8-203.3z"/></svg> ]   

&lt;div style = "position: absolute;top: 0px;right: 0px;"&gt;&lt;img src="images/logo.png" alt="The hex logo for plumbertableau package" width="500"&gt;&lt;/img&gt;&lt;/div&gt;

---

layout: true

&lt;div class="my-footer"&gt;&lt;span&gt;Philip Leftwich - 5023Y&lt;/span&gt;&lt;/div&gt;

---

## First some terms

&lt;img src="images/terms.png" title="An R object saved by using the assignment operator &amp;lt;- a dataframe called sloth_df is piped into the function select with arguments id, age and speed" alt="An R object saved by using the assignment operator &amp;lt;- a dataframe called sloth_df is piped into the function select with arguments id, age and speed" width="85%" /&gt;

---

class: center, middle, inverse



# **1. Naming things and entering data**


---

## When naming variables, observations, dataframes or files make them:

.pull-left[
* Meaningful

* Consistent

* Concise

* Readable
]

---

## When naming variables, observations, dataframes or files make them:

.left-code[
* **Meaningful**



* Consistent



* Concise



* Readable
]

.right-plot[
* Names of variables, data frames, and files should not be so generic/vague that a user must need a glossary to know what they contain

* Names should be specific to the data/experiment/project, and the more intuitive their interpretation the better

* **Bad examples:** File-1.xlsx, file-2.csv, indicator1, indicator2, ExperimentA.R, ExperimentB.R

* **Better examples:** taco_nutrients.csv, ca-demographics, mice_1a_mass, sb_channel_spatial.shp

]

---

## When naming variables, observations, dataframes or files make them:

.left-code[
* Meaningful



* **Consistent**



* Concise



* Readable
]

.right-plot[
* Keep names **identical** for identical entries (e.g. “burrito-32” and “Burrito 32” are *different things* to R)

* Be consistent **across data frames** - your life will be easier if you have year called ‘year’ in both sets.

* Use logical suffixes (if necessary), consistently formatted. Like: temp_water_surface, temp_water_sub, temp_water_bottom


]

---

## When naming variables, observations, dataframes or files make them:

.left-code[
* Meaningful



* Consistent



* **Concise**



* Readable
]

.right-plot[
* Balance meaningfulness w/conciseness

* Better to be descriptive than not know what a variable is

* Longer names = tedious coding, but less effort to look through metadata for column/identifier names



]

---

## When naming variables, observations, dataframes or files make them:

.left-code[
* Meaningful



* Consistent



* Concise



* **Readable**
]

.right-plot[
* Avoid punctuation (%, !, ~, ( ), #) in names - more challenging to type &amp; can break code.

* Avoid spaces (makes coding much more difficult)

* Avoid starting object names with numbers (but could be useful for file names in sequence)

]
---


## When naming variables, observations, dataframes or files make them:

.left-code[
* Meaningful



* Consistent



* Concise



* **Readable**
]

.right-plot[

* Avoid naming objects that are also commonly used functions (like filter or select)

* Pick (and be consistent with) a choice of case, like:
    * **lowercase_snake_case** (my favorite)
    * camelCase
    * UpperCamelCase
    * kebab-case
    * SCREAMING_SNAKE_CASE

]

---

## Entering data

* The outcomes for a variable (whether values or descriptions) should exist alone in a column

* Be very consistent when entering descriptions (e.g. “Purple” v. “purple” v. “purple_”)

* Avoid formatting and symbols (if it’s hard to type, then it’s hard to type...and might cause issues beyond that)

* Put any additional information (units, notes, etc.) in columns separate from the value/description

* If there are missings, enter the **same exact thing** for each missing value (common: NA, -- or -)


---

## Data entry

.pull-left[
### Bad:
&lt;img src="images/bad_df.png" title="Inconsistent data entry, units in the column of berry mass, observations mixed in with units" alt="Inconsistent data entry, units in the column of berry mass, observations mixed in with units" width="95%" /&gt;

]

--

.pull-right[
### Better:
&lt;img src="images/good_df.png" title="Units included in title, consistent use of snake case, each column is a unique variable, each row is an observation. Notes in separate column" alt="Units included in title, consistent use of snake case, each column is a unique variable, each row is an observation. Notes in separate column" width="95%" /&gt;

]

---




class: center, middle, inverse



# Tidy data


---

&lt;img src="images/tidy_data.png" title="In tidy data:Every column is a variable, every row is an observation, every cell is a single value." alt="In tidy data:Every column is a variable, every row is an observation, every cell is a single value." width="90%" /&gt;


---
class: middle

* A variable is a characteristic that is being measured, counted or described with data. Like: car type, salinity, year, population, or whale mass.

* An observation is a single “data point” for which the measure, count or description of one or more variables is recorded. For example, if you are recording variables height, mass, and flipper length of penguins, then each penguin is an observation.

* A value is the recorded measure, count or description of a variable.

---

## Example of Tidy data

<div id="maijpaynla" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#maijpaynla .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#maijpaynla .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#maijpaynla .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#maijpaynla .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#maijpaynla .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#maijpaynla .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#maijpaynla .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#maijpaynla .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#maijpaynla .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#maijpaynla .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#maijpaynla .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#maijpaynla .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#maijpaynla .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#maijpaynla .gt_from_md > :first-child {
  margin-top: 0;
}

#maijpaynla .gt_from_md > :last-child {
  margin-bottom: 0;
}

#maijpaynla .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#maijpaynla .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#maijpaynla .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#maijpaynla .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#maijpaynla .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#maijpaynla .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#maijpaynla .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#maijpaynla .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#maijpaynla .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#maijpaynla .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#maijpaynla .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#maijpaynla .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#maijpaynla .gt_left {
  text-align: left;
}

#maijpaynla .gt_center {
  text-align: center;
}

#maijpaynla .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#maijpaynla .gt_font_normal {
  font-weight: normal;
}

#maijpaynla .gt_font_bold {
  font-weight: bold;
}

#maijpaynla .gt_font_italic {
  font-style: italic;
}

#maijpaynla .gt_super {
  font-size: 65%;
}

#maijpaynla .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">id</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">species</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">size_kg</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">height_m</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_right">1</td>
<td class="gt_row gt_left">wookie</td>
<td class="gt_row gt_right">110</td>
<td class="gt_row gt_right">2.1</td></tr>
    <tr><td class="gt_row gt_right">2</td>
<td class="gt_row gt_left">wookie</td>
<td class="gt_row gt_right">121</td>
<td class="gt_row gt_right">2.2</td></tr>
    <tr><td class="gt_row gt_right">3</td>
<td class="gt_row gt_left">ewok</td>
<td class="gt_row gt_right">36</td>
<td class="gt_row gt_right">1.0</td></tr>
    <tr><td class="gt_row gt_right">4</td>
<td class="gt_row gt_left">wookie</td>
<td class="gt_row gt_right">107</td>
<td class="gt_row gt_right">2.2</td></tr>
    <tr><td class="gt_row gt_right">5</td>
<td class="gt_row gt_left">ewok</td>
<td class="gt_row gt_right">38</td>
<td class="gt_row gt_right">1.1</td></tr>
    <tr><td class="gt_row gt_right">6</td>
<td class="gt_row gt_left">ewok</td>
<td class="gt_row gt_right">30</td>
<td class="gt_row gt_right">0.9</td></tr>
  </tbody>
  
  
</table>
</div>

---

## Why isn't this tidy?

<div id="mbxrpydgof" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#mbxrpydgof .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#mbxrpydgof .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mbxrpydgof .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#mbxrpydgof .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#mbxrpydgof .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mbxrpydgof .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#mbxrpydgof .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#mbxrpydgof .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#mbxrpydgof .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#mbxrpydgof .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#mbxrpydgof .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#mbxrpydgof .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#mbxrpydgof .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#mbxrpydgof .gt_from_md > :first-child {
  margin-top: 0;
}

#mbxrpydgof .gt_from_md > :last-child {
  margin-bottom: 0;
}

#mbxrpydgof .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#mbxrpydgof .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#mbxrpydgof .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mbxrpydgof .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#mbxrpydgof .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#mbxrpydgof .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#mbxrpydgof .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#mbxrpydgof .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#mbxrpydgof .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mbxrpydgof .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#mbxrpydgof .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#mbxrpydgof .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#mbxrpydgof .gt_left {
  text-align: left;
}

#mbxrpydgof .gt_center {
  text-align: center;
}

#mbxrpydgof .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#mbxrpydgof .gt_font_normal {
  font-weight: normal;
}

#mbxrpydgof .gt_font_bold {
  font-weight: bold;
}

#mbxrpydgof .gt_font_italic {
  font-style: italic;
}

#mbxrpydgof .gt_super {
  font-size: 65%;
}

#mbxrpydgof .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">country</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">year</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">key</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">value</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Afghanistan</td>
<td class="gt_row gt_right">1999</td>
<td class="gt_row gt_left">cases</td>
<td class="gt_row gt_right">745</td></tr>
    <tr><td class="gt_row gt_left">Afghanistan</td>
<td class="gt_row gt_right">1999</td>
<td class="gt_row gt_left">population</td>
<td class="gt_row gt_right">19987071</td></tr>
    <tr><td class="gt_row gt_left">Afghanistan</td>
<td class="gt_row gt_right">2000</td>
<td class="gt_row gt_left">cases</td>
<td class="gt_row gt_right">2666</td></tr>
    <tr><td class="gt_row gt_left">Afghanistan</td>
<td class="gt_row gt_right">2000</td>
<td class="gt_row gt_left">population</td>
<td class="gt_row gt_right">20595360</td></tr>
    <tr><td class="gt_row gt_left">Brazil</td>
<td class="gt_row gt_right">1999</td>
<td class="gt_row gt_left">cases</td>
<td class="gt_row gt_right">37737</td></tr>
    <tr><td class="gt_row gt_left">Brazil</td>
<td class="gt_row gt_right">1999</td>
<td class="gt_row gt_left">population</td>
<td class="gt_row gt_right">172006362</td></tr>
    <tr><td class="gt_row gt_left">Brazil</td>
<td class="gt_row gt_right">2000</td>
<td class="gt_row gt_left">cases</td>
<td class="gt_row gt_right">80488</td></tr>
    <tr><td class="gt_row gt_left">Brazil</td>
<td class="gt_row gt_right">2000</td>
<td class="gt_row gt_left">population</td>
<td class="gt_row gt_right">174504898</td></tr>
    <tr><td class="gt_row gt_left">China</td>
<td class="gt_row gt_right">1999</td>
<td class="gt_row gt_left">cases</td>
<td class="gt_row gt_right">212258</td></tr>
    <tr><td class="gt_row gt_left">China</td>
<td class="gt_row gt_right">1999</td>
<td class="gt_row gt_left">population</td>
<td class="gt_row gt_right">127915272</td></tr>
    <tr><td class="gt_row gt_left">China</td>
<td class="gt_row gt_right">2000</td>
<td class="gt_row gt_left">cases</td>
<td class="gt_row gt_right">213766</td></tr>
    <tr><td class="gt_row gt_left">China</td>
<td class="gt_row gt_right">2000</td>
<td class="gt_row gt_left">population</td>
<td class="gt_row gt_right">1280428583</td></tr>
  </tbody>
  
  
</table>
</div>


---

## Make it tidy


```r
data %&gt;% 
  tidyr::pivot_wider( names_from = key,
                      values_from = value) %&gt;% 
  gt()
```

<div id="wmmvxlukai" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#wmmvxlukai .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#wmmvxlukai .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wmmvxlukai .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#wmmvxlukai .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#wmmvxlukai .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wmmvxlukai .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#wmmvxlukai .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#wmmvxlukai .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#wmmvxlukai .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#wmmvxlukai .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#wmmvxlukai .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#wmmvxlukai .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#wmmvxlukai .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#wmmvxlukai .gt_from_md > :first-child {
  margin-top: 0;
}

#wmmvxlukai .gt_from_md > :last-child {
  margin-bottom: 0;
}

#wmmvxlukai .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#wmmvxlukai .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#wmmvxlukai .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wmmvxlukai .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#wmmvxlukai .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#wmmvxlukai .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#wmmvxlukai .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#wmmvxlukai .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#wmmvxlukai .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wmmvxlukai .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#wmmvxlukai .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#wmmvxlukai .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#wmmvxlukai .gt_left {
  text-align: left;
}

#wmmvxlukai .gt_center {
  text-align: center;
}

#wmmvxlukai .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#wmmvxlukai .gt_font_normal {
  font-weight: normal;
}

#wmmvxlukai .gt_font_bold {
  font-weight: bold;
}

#wmmvxlukai .gt_font_italic {
  font-style: italic;
}

#wmmvxlukai .gt_super {
  font-size: 65%;
}

#wmmvxlukai .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">country</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">year</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">cases</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">population</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Afghanistan</td>
<td class="gt_row gt_right">1999</td>
<td class="gt_row gt_right">745</td>
<td class="gt_row gt_right">19987071</td></tr>
    <tr><td class="gt_row gt_left">Afghanistan</td>
<td class="gt_row gt_right">2000</td>
<td class="gt_row gt_right">2666</td>
<td class="gt_row gt_right">20595360</td></tr>
    <tr><td class="gt_row gt_left">Brazil</td>
<td class="gt_row gt_right">1999</td>
<td class="gt_row gt_right">37737</td>
<td class="gt_row gt_right">172006362</td></tr>
    <tr><td class="gt_row gt_left">Brazil</td>
<td class="gt_row gt_right">2000</td>
<td class="gt_row gt_right">80488</td>
<td class="gt_row gt_right">174504898</td></tr>
    <tr><td class="gt_row gt_left">China</td>
<td class="gt_row gt_right">1999</td>
<td class="gt_row gt_right">212258</td>
<td class="gt_row gt_right">127915272</td></tr>
    <tr><td class="gt_row gt_left">China</td>
<td class="gt_row gt_right">2000</td>
<td class="gt_row gt_right">213766</td>
<td class="gt_row gt_right">1280428583</td></tr>
  </tbody>
  
  
</table>
</div>

---

## Why isn't this tidy?

<div id="qqrgojwyco" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#qqrgojwyco .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#qqrgojwyco .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qqrgojwyco .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#qqrgojwyco .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#qqrgojwyco .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qqrgojwyco .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#qqrgojwyco .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#qqrgojwyco .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#qqrgojwyco .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#qqrgojwyco .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#qqrgojwyco .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#qqrgojwyco .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#qqrgojwyco .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#qqrgojwyco .gt_from_md > :first-child {
  margin-top: 0;
}

#qqrgojwyco .gt_from_md > :last-child {
  margin-bottom: 0;
}

#qqrgojwyco .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#qqrgojwyco .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#qqrgojwyco .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qqrgojwyco .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#qqrgojwyco .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#qqrgojwyco .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#qqrgojwyco .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#qqrgojwyco .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#qqrgojwyco .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qqrgojwyco .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#qqrgojwyco .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#qqrgojwyco .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#qqrgojwyco .gt_left {
  text-align: left;
}

#qqrgojwyco .gt_center {
  text-align: center;
}

#qqrgojwyco .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#qqrgojwyco .gt_font_normal {
  font-weight: normal;
}

#qqrgojwyco .gt_font_bold {
  font-weight: bold;
}

#qqrgojwyco .gt_font_italic {
  font-style: italic;
}

#qqrgojwyco .gt_super {
  font-size: 65%;
}

#qqrgojwyco .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">country</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">year</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">cases/population</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Afghanistan</td>
<td class="gt_row gt_right">1999</td>
<td class="gt_row gt_left">745/19987071</td></tr>
    <tr><td class="gt_row gt_left">Afghanistan</td>
<td class="gt_row gt_right">2000</td>
<td class="gt_row gt_left">2666/20595360</td></tr>
    <tr><td class="gt_row gt_left">Brazil</td>
<td class="gt_row gt_right">1999</td>
<td class="gt_row gt_left">37737/172006362</td></tr>
    <tr><td class="gt_row gt_left">Brazil</td>
<td class="gt_row gt_right">2000</td>
<td class="gt_row gt_left">80488/174504898</td></tr>
    <tr><td class="gt_row gt_left">China</td>
<td class="gt_row gt_right">1999</td>
<td class="gt_row gt_left">212258/ 127915272</td></tr>
    <tr><td class="gt_row gt_left">China</td>
<td class="gt_row gt_right">2000</td>
<td class="gt_row gt_left">213766/1280428583</td></tr>
  </tbody>
  
  
</table>
</div>


---

## Make it tidy


```r
data %&gt;% 
  separate(`cases/population`,
           c("cases", "population")) %&gt;% 
  gt()
```

<div id="yxzxjndubm" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

#yxzxjndubm .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#yxzxjndubm .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#yxzxjndubm .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#yxzxjndubm .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#yxzxjndubm .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yxzxjndubm .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#yxzxjndubm .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#yxzxjndubm .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#yxzxjndubm .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#yxzxjndubm .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#yxzxjndubm .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#yxzxjndubm .gt_group_heading {
  padding: 8px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

#yxzxjndubm .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#yxzxjndubm .gt_from_md > :first-child {
  margin-top: 0;
}

#yxzxjndubm .gt_from_md > :last-child {
  margin-bottom: 0;
}

#yxzxjndubm .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#yxzxjndubm .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 12px;
}

#yxzxjndubm .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#yxzxjndubm .gt_first_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
}

#yxzxjndubm .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#yxzxjndubm .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#yxzxjndubm .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#yxzxjndubm .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#yxzxjndubm .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#yxzxjndubm .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding: 4px;
}

#yxzxjndubm .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#yxzxjndubm .gt_sourcenote {
  font-size: 90%;
  padding: 4px;
}

#yxzxjndubm .gt_left {
  text-align: left;
}

#yxzxjndubm .gt_center {
  text-align: center;
}

#yxzxjndubm .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#yxzxjndubm .gt_font_normal {
  font-weight: normal;
}

#yxzxjndubm .gt_font_bold {
  font-weight: bold;
}

#yxzxjndubm .gt_font_italic {
  font-style: italic;
}

#yxzxjndubm .gt_super {
  font-size: 65%;
}

#yxzxjndubm .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 65%;
}
</style>
<table class="gt_table">
  
  <thead class="gt_col_headings">
    <tr>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">country</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_right" rowspan="1" colspan="1">year</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">cases</th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1">population</th>
    </tr>
  </thead>
  <tbody class="gt_table_body">
    <tr><td class="gt_row gt_left">Afghanistan</td>
<td class="gt_row gt_right">1999</td>
<td class="gt_row gt_left">745</td>
<td class="gt_row gt_left">19987071</td></tr>
    <tr><td class="gt_row gt_left">Afghanistan</td>
<td class="gt_row gt_right">2000</td>
<td class="gt_row gt_left">2666</td>
<td class="gt_row gt_left">20595360</td></tr>
    <tr><td class="gt_row gt_left">Brazil</td>
<td class="gt_row gt_right">1999</td>
<td class="gt_row gt_left">37737</td>
<td class="gt_row gt_left">172006362</td></tr>
    <tr><td class="gt_row gt_left">Brazil</td>
<td class="gt_row gt_right">2000</td>
<td class="gt_row gt_left">80488</td>
<td class="gt_row gt_left">174504898</td></tr>
    <tr><td class="gt_row gt_left">China</td>
<td class="gt_row gt_right">1999</td>
<td class="gt_row gt_left">212258</td>
<td class="gt_row gt_left">127915272</td></tr>
    <tr><td class="gt_row gt_left">China</td>
<td class="gt_row gt_right">2000</td>
<td class="gt_row gt_left">213766</td>
<td class="gt_row gt_left">1280428583</td></tr>
  </tbody>
  
  
</table>
</div>
---

## Pivot

&lt;img src="images/pivot.gif" title="Pivot to reshape dataframes" alt="Pivot to reshape dataframes" width="60%" /&gt;

---

## Data file formats

Understanding file formats is important! 

* Human readable filename (use naming conventions)

* One period only 

* the extension is important!

&lt;img src="images/images.png" title="Filenames consists of a human readable filename, period, and file extension " alt="Filenames consists of a human readable filename, period, and file extension " width="60%" /&gt;


---

| File types| Meaning|
|-----|-----|
|.csv| comma-separated values|
|.tsv| tab-separated values|
|.xls| Excel spreadsheet|
|.xlsx| Excel 2007|
|.json| String data storage|


```r
read_csv("data/penguins_raw.csv")
```


---
class: center, middle, inverse

# **2. Help yourself in R:**

## Finding resources and tips for troubleshooting


---

## What package or function should I use?

### **Google it:**

  * Search with the keywords and package/function name if known, and include .R in the search keywords (e.g. “dplyr::mutate add column in .R” instead of “mutate variable”).
    
  * “R” is generic - so consider using “R software” or “.R”
    
  * Start learning and using language common in R communities &amp; publications (e.g. [R4DS](https://r4ds.had.co.nz/)), like data frame instead of spreadsheet
    
  * For now, anything reading, wrangling, ggplot2 related: considering navigating to documentation from [tidyverse.org](https://www.tidyverse.org/), [rdocumentation](https://www.rdocumentation.org/), or [RStudio community](https://community.rstudio.com/). 

---

## How do I know there’s an error, and where to look for it? 

* When you save a script, lines of code with some errors (e.g. unmatched parentheses) will have a red circle with an x in it next to the line number

&lt;img src="images/console_error.png" title="Syntax error" alt="Syntax error" width="50%" /&gt;

* You might also see a red squiggly line under part of your code, indicating a syntax issue. You can hover over the squiggly to see a pop-up hint about what’s going on. 

---

## Error messages will show up* in the Console when you try to run the broken code: 


&lt;img src="images/error_output.png" title="Console error" alt="Console error" width="50%" /&gt;

---
class: center

## Fact
### Sometimes walking away is the most productive

&lt;img src="images/Error.jpg" title="Things will look better in the morning" alt="Things will look better in the morning" width="50%" /&gt;

---

## There are multiple types of messages that R will print. Read the message to figure out what it’s trying to tell you. 

* **Error:** There’s a fatal error in your code that prevented it from being run through successfully. You need to fix it for the code to run. 

* **Warning:** Non-fatal errors (don’t stop the code from running, but this is a potential problem that you should know about).

* **Message:** Here’s some helpful information about the code you just ran (you can hide these if you want to)

---
class: center

### Read the error message
--

## Read the error message
--

# Read the error message

Sometimes it will be infuriatingly vague, but often it will tell you exactly how to fix it (e.g. “do you need ==?”). 

&lt;img src="images/misspelling.png" title="Always read the error message" alt="Always read the error message" width="60%" /&gt;

---

## Troubleshooting

* Symptom: `Error in _________: could not find function “_________”`


* Diagnosis: 
    * The `library()` containing the function hasn't been called
    * The function has been misspelled

---

## Troubleshooting

* Symptom: `Error in ____ : object ‘_____’ not found’`

* Diagnosis: 
    * The object hasn’t been created or stored
    * You’ve mistyped the object name

---

## Troubleshooting
  
### If R…tells you it’s ignoring an argument within a function

* Symptom: `Warning: Ignoring unknown parameters: ____`

* Diagnosis: 
    * You’ve included an argument that doesn’t exist for that function
    * You’ve mistyped an argument that does exist for that function
---

## Troubleshooting

* Look over code very carefully - character-by-character and space-by-space. Run line-by-line to see where it breaks. 

--

* Google the copied &amp; pasted error message. **Someone else has encountered and solved it before**.

--

* Take a break and come back to it later. ☕ 

---

### Get Help

.pull-left[

&lt;img src="images/geordi_help.png" title="Ask for help in a smart way" alt="Ask for help in a smart way" width="100%" /&gt;

]

.pull-right[

There will be a discussion board on Blackboard to ask all of your coding questions. 

Make your questions as clear as possible

* What are you trying to do?

* What is the exact error message or output

* What code did you run to produce this

]


---

class: center, middle, inverse



# dplyr




    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "dracula",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
